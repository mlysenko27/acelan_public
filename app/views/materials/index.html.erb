<div class="px-4 sm:px-6 lg:px-8">
  <div class="mt-8 flow-root">
    <div class="border-b border-gray-200 bg-white px-4 py-5 sm:px-6 flex justify-center">
      <div class="-ml-4 -mt-2 flex flex-wrap items-center justify-between sm:flex-nowrap w-5/6">
        <div class="mt-2 flex items-center">
          <h2 class="text-lg font-semibold leading-6 text-gray-900">Materials</h2>
          <%= form_tag('/materials', method: :get, class: 'mx-4') do -%>
            <div class="w-full">
              <div class="mt-2 flex rounded-md shadow-sm">
                <div class="relative flex flex-grow items-stretch min-w- focus-within:z-10">
                  <input type="search" name="search" id="search" class="block w-full rounded-none rounded-l-md border-0 py-1.5 pl-4
                  text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"
                         placeholder="Name, Source or Type"
                <%- if @search %>
                    value='<%=@search %>'
                <%-end %>
                >
                </div>
                <button type="submit" class="relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 py-2 text-sm font-semibold text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                  </svg>
                  Search
                </button>
              </div>
            </div>

          <% end -%>
        </div>
        <div class="ml-4 mt-2 flex-shrink-0">
          <%= link_to materials_new_path do %>
            <button type="button"

                    class="relative inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
              <svg class="text-white w-6 h-6 mr-2 group-hover:text-bermuda-100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z" clip-rule="evenodd" />
              </svg>
              New
            </button>
          <%-end %>

        </div>
      </div>
    </div>

    <div class="-my-2 -mx-4 sm:-mx-6 lg:-mx-8">
      <div data-controller="materials" class="flex justify-center min-w-full py-2 align-middle sm:px-6 lg:px-8">
        <table class="divide-y pl-2 divide-gray-300  w-5/6">
          <thead>
          <tr class="min-w-full">
            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">
              Name
            </th>
            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">
              Owner
            </th>
            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">
              Type
            </th>
            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">
              Added At</th>
            <th scope="col" class="whitespace-nowrap px-2 py-3.5 text-left text-sm font-semibold text-gray-900">
              Source
            </th>
          </tr>
          </thead>
          <tbody class="divide-y divide-gray-200 bg-white">
          <%- @materials.each do |material| %>
            <tr
              data-action="click->materials#click"
              data-materials-details-id="<%= material.id %>">
              <td class="whitespace-nowrap px-2 py-2 text-sm font-medium text-gray-900"><%= material.name %></td>
              <td class="whitespace-nowrap px-2 py-2 text-sm text-gray-900"><%= material.owner_name %></td>
              <td class="whitespace-nowrap px-2 py-2 text-sm text-gray-900"><%= material.type_name %></td>
              <td class="whitespace-nowrap px-2 py-2 text-sm text-gray-900"><%= material.created_at.to_date %></td>
              <td class="whitespace-nowrap px-2 py-2 text-sm text-gray-900">
                <%-if material.source.present? %>
                <%= link_to material.source, material.source, {class: "link text-blue-600"} %>
                <%-else %>
                  Built-in material
                <%-end %>
            </tr>
          <tr data-materials-target="details"
              data-details-id="<%= material.id %>"
              class="hidden" >
            <td colspan="5">
              <%-case material.type %>
              <%-when 'Materials::AnisotropicMaterial' %>
                <%= render partial: 'materials/forms/anisotropic', locals: {material: material} %>
              <%-end %>

            </td>
          </tr>
          <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

